# Test Strategy

ZTOQ (Zephyr to qTest) follows a comprehensive test strategy based on the test pyramid approach, which provides a balanced mix of different test types to ensure code quality and reliability.

## Test Pyramid

The test pyramid is a testing strategy that emphasizes having:

- **Many unit tests** at the base of the pyramid (fast, focused, isolated)
- **Some integration tests** in the middle (testing component interactions)
- **Few end-to-end tests** at the top (slow, comprehensive)

```
    ^^^^^^^^^^^^^^^^^^^^^    
    ^^^^ E2E Tests ^^^^^    
    ^^^^^^^^^^^^^^^^^^^^^    
  /^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^/  
  ^^^^^^^ Integration Tests ^^^^^^^^^^^^^  
  /^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^/  
///////////////////////////////////////////////////////////
/////////////// Unit Tests ////////////////////////////////
///////////////////////////////////////////////////////////
```

This approach provides several benefits:

1. **Speed**: Unit tests run quickly, allowing for fast feedback during development
2. **Isolation**: Issues can be pinpointed to specific components
3. **Coverage**: Core functionality is thoroughly tested
4. **Confidence**: Higher-level tests verify that components work together

## Test Types

### Unit Tests

Unit tests focus on testing individual components in isolation:

- **Scope**: Single functions, methods, or classes
- **Dependencies**: Mocked or stubbed
- **Count**: Many (70-80% of all tests)
- **Speed**: Very fast (milliseconds)
- **Directory**: `tests/unit/`

### Integration Tests

Integration tests verify that components work together correctly:

- **Scope**: Multiple components, subsystems
- **Dependencies**: Partially real, partially mocked
- **Count**: Some (15-20% of all tests)
- **Speed**: Medium (seconds)
- **Directory**: `tests/integration/`

### End-to-End Tests

E2E tests validate the system as a whole:

- **Scope**: Entire application flow
- **Dependencies**: Real dependencies when possible
- **Count**: Few (5-10% of all tests)
- **Speed**: Slow (seconds to minutes)
- **Directory**: `tests/e2e/`

## Test-Driven Development

ZTOQ follows a Test-Driven Development (TDD) approach:

1. **Red**: Write a failing test
2. **Green**: Write the minimum code to make the test pass
3. **Refactor**: Improve the code while keeping tests passing

This ensures that all code is covered by tests and that the design is driven by actual requirements.

## Running Tests

Tests can be run using the following commands:

```bash
# Run all tests
make test

# Run unit tests only
make test-unit

# Run integration tests only
make test-integration

# Run with coverage
make test-cov

# Run comprehensive build (tests, docs, badges)
make build
```

## Test Badges

The README includes automatically updated badges that show:

- Overall test pass rate
- Unit test pass rate
- Integration test pass rate
- E2E test pass rate

These badges are generated by the `scripts/master_build.py` script and stored as JSON files in the `docs/badges/` directory.